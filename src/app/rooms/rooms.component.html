<h4>Список помещений</h4>

<label>Введите название офиса:</label>&nbsp;
<input 
  type="text" 
  [(ngModel)]="officeSearch" 
  (input)="filterOffices()" 
  placeholder="Название офиса"
/>

<ul *ngIf="filteredOffices.value" class="dropdown">
  <li 
    *ngFor="let office of (filteredOffices.value)"
    (click)="selectOffice(office)"
    class="dropdown-item"
    tabindex="0"
    (keydown.enter)="selectOffice(office)"
  >
    {{ office.name }}
  </li>
</ul>

<table class="styled-table">
  <thead>
    <tr>
      <th>№</th>
      <th>Название</th>
      <th *ngIf="role === 'ADMIN'">Действия</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let room of rooms; let i = index">
      <td>{{ i + 1 }}</td>
      <td>{{ room.name }}</td>
      <td *ngIf="role === 'ADMIN'">
        <button (click)="openEditRoomForm(room)">Редактировать</button>
        <button (click)="delRoom(room.id)">Удалить</button>
      </td>
    </tr>
  </tbody>
</table>

<div *ngIf="role === 'ADMIN'" class="room-form">
  <h4>{{ selectedRoomId ? 'Редактировать помещение' : 'Создать помещение' }}</h4>
  Название:&nbsp;
  <input id="rname" type="text" [(ngModel)]="roomForm.rname" placeholder="Введите название помещения" /> <br/><br/>
  Координаты стен:&nbsp;
  <input id="x1" type="text" [(ngModel)]="roomForm.walls.x1" placeholder="Введите x1" /> <br/><br/>
  <input id="x2" type="text" [(ngModel)]="roomForm.walls.x2" placeholder="Введите x2" /> <br/><br/>
  <input id="y1" type="text" [(ngModel)]="roomForm.walls.y1" placeholder="Введите y1" /> <br/><br/>
  <input id="y2" type="text" [(ngModel)]="roomForm.walls.y2" placeholder="Введите y2" /> <br/><br/>
  <input type="button" value="{{ selectedRoomId ? 'Сохранить изменения' : 'Создать помещение' }}" (click)="selectedRoomId ? editRoom() : addRoom()"><br/><br/>
  <button type="button" (click)="closeRoomForm()">Отменить</button>
</div>

<div [class.hide]="isreg==1">
  <p>Для просмотра данного раздела необходимо <a href="/">авторизоваться</a></p>
</div>

