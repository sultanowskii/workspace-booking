create table offices
(
id serial primary key,
name text not null unique,
address text not null
);

create table rooms
(
id serial primary key,
offices_id integer not null references offices(id),
name text not null unique
);

create table room_walls
(
rooms_id integer not null references rooms(id),
x1 double precision not null,
y1 double precision not null,
x2 double precision not null,
y2 double precision not null
);

create table meeting_rooms
(
id serial primary key,
rooms_id integer not null references rooms(id),
name text not null unique
);


create table meeting_rooms_visual
(
meeting_rooms_id integer not null references meeting_rooms(id),
x double precision not null,
y double precision not null,
width double precision not null check (width > 0),
height double precision not null check (height > 0)
);

create table workplaces
(
id serial primary key,
rooms_id integer not null references rooms(id),
number_of_monitors integer not null check (number_of_monitors >= 0)
);

create table users
(
id serial primary key, 
login text not null unique CHECK (length(login) BETWEEN 4 AND 20), 
password text not null unique CHECK (length(password) BETWEEN 4 AND 20), 
account_type text not null
);

create table employee_groups
(
id serial primary key,
name text not null unique
);

create table office_employee_groups
(
id serial primary key,
offices_id integer not null references offices(id),
employee_groups_id integer not null references employee_groups(id)
);

create table employees
(
id serial primary key,
users_id integer not null references users(id),
employee_groups_id integer not null references employee_groups(id),
full_name text not null
);

create table workplaces_booking
(
id serial primary key,
employees_id integer not null references employees(id),
workplaces_id integer not null references workplaces(id),
_date date not null
);

create table admins
(
id serial primary key,
users_id integer not null references users(id),
full_name text not null
);

create table meeting_rooms_booking
(
id serial primary key,
employees_id integer not null references employees(id),
meeting_rooms_id integer not null references meeting_rooms(id),
_date date not null,
start_time time not null,
end_time time not null,
description text not null
);

create table meeting_participants
(
id serial primary key,
meeting_rooms_booking_id integer not null references meeting_rooms_booking(id),
employees_id integer not null references employees(id)
);

create table workplaces_visual
(
workplaces_id integer not null references workplaces(id),
x double precision not null,
y double precision not null, 
width double precision not null check (width > 0),
height double precision not null check (height > 0)
);