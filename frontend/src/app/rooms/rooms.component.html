<h4>Список помещений</h4>

<div>
  <label>Введите название офиса:</label>&nbsp;
  <input 
    type="text" 
    [(ngModel)]="officeSearch" 
    (input)="filterOffices()" 
    placeholder="Введите название офиса"
  />
  <ul *ngIf="filteredOffices.length > 0" class="dropdown">
    <li 
      *ngFor="let office of filteredOffices"
      (click)="selectOffice(office)"
      class="dropdown-item"
      tabindex="0"
      (keydown.enter)="selectOffice(office)"
    >
      {{ office.name }}
    </li>
  </ul>
</div>

<table class="styled-table">
  <thead>
    <tr>
      <th>№</th>
      <th>Название</th>
      <th *ngIf="role === 'ADMIN'">Действия</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let room of rooms; let i = index">
      <td>{{ i + 1 }}</td>
      <td>{{ room.name }}</td>
      <td *ngIf="role === 'ADMIN'">
        <button (click)="openEditRoomForm(room)">Редактировать</button>
        <button (click)="delRoom(room.id)">Удалить</button>
      </td>
    </tr>
  </tbody>
  <button (click)="openRoomForm()">Создать</button>
</table>

<div *ngIf="role === 'ADMIN' && showRoomForm" class="room-form">
  <h4>{{ selectedRoomId ? 'Редактировать помещение' : 'Создать помещение' }}</h4>
  Название:&nbsp;
  <input id="name" type="text" [(ngModel)]="roomForm.name" placeholder="Введите название помещения" /> <br/><br/>
  <label for="wallsCount">Количество стен:</label>&nbsp;
  <input
    type="number"
    id="wallsCount"
    [(ngModel)]="wallsCount"
    (change)="updateWalls()"
    min="0"
    placeholder="Введите количество стен"
  />
  <br /><br />

  <div *ngFor="let wall of walls; let i = index">
    <h5>Стена {{ i + 1 }}</h5>
    <label for="x1-{{i}}">x1:</label>&nbsp;
    <input id="x1-{{i}}" type="number" [(ngModel)]="wall.x1" placeholder="Введите x1" /><br /><br />

    <label for="y1-{{i}}">y1:</label>&nbsp;
    <input id="y1-{{i}}" type="number" [(ngModel)]="wall.y1" placeholder="Введите y1" /><br /><br />

    <label for="x2-{{i}}">x2:</label>&nbsp;
    <input id="x2-{{i}}" type="number" [(ngModel)]="wall.x2" placeholder="Введите x2" /><br /><br />

    <label for="y2-{{i}}">y2:</label>&nbsp;
    <input id="y2-{{i}}" type="number" [(ngModel)]="wall.y2" placeholder="Введите y2" /><br /><br />
  </div>
  <input type="button" value="Сохранить изменения" (click)="addRoom()"><br/><br/>
  <button type="button" (click)="closeRoomForm()">Отменить</button>
</div>

<div [class.hide]="isreg==1">
  <p>Для просмотра данного раздела необходимо <a href="/">авторизоваться</a></p>
</div>

